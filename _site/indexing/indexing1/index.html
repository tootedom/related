<!doctype html>




<!--[if IE 9]><html class="lt-ie10" lang="en" > <![endif]-->
<html class="no-js" lang="en" data-useragent="Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)">
   
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Relate It</title>

    
    <meta name="description" content="Relate it: Tracks Frequently Related Items." />
    
    <meta name="author" content="Dominic Tootell" />
    <meta name="copyright" content="relate it (c) 2013-2014" />

    <link rel="stylesheet" href="http://tootedom.github.io/related/stylesheets/foundation.css" />
    <script src="http://tootedom.github.io/related/javascripts/vendor/modernizr.js"></script>
</head>


  <body>
    

<!-- Nav Bar -->

  <header class="inner">

	<nav>
	  <div class="row">
	    <div class="large-12 columns">
	      <div class="nav-bar right" style="padding-top: 30px">
	       <ul class="button-group">
	         <li><a href='http://tootedom.github.io/related/index.html' class="radius small button">Home</a></li>
	          <li class="divider"></li>
	         <li><a href='http://tootedom.github.io/related/indexing/index.html' data-dropdown="searchingdrop" data-options="is_hover:true" class="radius small button dropdown">Indexing</a><br/>
				<ul id="searchingdrop" data-dropdown-content class="small content f-dropdown">
				  <li><a href="http://tootedom.github.io/related/indexing/indexing1/index.html">Indexing Overview</a></li>
				  <li><a href="http://tootedom.github.io/related/indexing/indexing2/index.html">Indexing Date Names</a></li>
				  <li><a href="http://tootedom.github.io/related/indexing/indexing3/index.html">Post Document Format</a></li>
				  <li><a href="http://tootedom.github.io/related/indexing/indexing4/index.html">Related Item Properties</a></li>
				</ul>
			</li>
	         <li><a href='http://tootedom.github.io/related/searching/searching.html' class="radius small button">Searching</a></li>
	         <li><a href='http://tootedom.github.io/related/configuration.html' class="radius small button">Configuration</a></li>
	         <li><a href='http://tootedom.github.io/related/bog.html' class="radius small button">Blog</a></li>
	         <li><a href='http://tootedom.github.io/related/downloads.html'  class="radius small button">Downloads</a></li>         
	        </ul>
	      </div>
	      <h1><img src="http://tootedom.github.io/related/images/relateitlogo.png"></h1>
	      <hr />
	    </div>
	  </div>
	</nav>

</header>


  <!-- End Nav -->


  <!-- Main Page Content and Sidebar -->

  <div class="row">
    
    <!-- Main Blog Content -->
    <div class="large-9 columns" role="content">
    <h1><a href="/indexing/indexing1">Indexing Overview</a></h1>
    <p>The index web application is POSTed data containing a group of related items, i.e. for example a purchase containing several items.</p>

<pre><code>curl -H&quot;Content-Type:text/json&quot; -XPOST -v http://localhost:8080/indexing/index -d &#39;
{
   &quot;channel&quot;:&quot;de&quot;,
   &quot;site&quot;:&quot;amazon&quot;,
   &quot;items&quot;:[
      {
         &quot;id&quot;:&quot;1&quot;,
         &quot;type&quot;:&quot;map&quot;
      },
      {
         &quot;id&quot;:&quot;2&quot;,
         &quot;type&quot;:&quot;compass&quot;
      },
      {
         &quot;id&quot;:&quot;3&quot;,
         &quot;type&quot;:&quot;torch&quot;
      },
      {
         &quot;id&quot;:&quot;4&quot;,
         &quot;type&quot;:&quot;torch&quot;,
         &quot;channel&quot;:&quot;uk&quot;
      }
   ]
}&#39;</code></pre>

<p>The indexing application returns a 202 accepted status code to the client that issued the indexing request. This indicates to the client that the request has been accepted for processing and indexing. Please note that the returning of 202 doesn’t mean that the related items have been stored in Elasticsearch. It means that the item is current held within the disruptor ring buffer pending processing and storage. The indexing application can return the following status codes:</p>

<ul>
<li>400 : The indexing json contains no products, or is invalid jason</li>

<li>503 : The ring buffer is full, and cannot accept any more items for processing.</li>

<li>202 : Item is being processed</li>
</ul>

<p>It is at this point the POSTed json data is assembled into several documents. For example, for the above request; 3 JSON documents will be assembled and submitted to elasticsearch for storage and indexing:</p>

<pre><code>{
    &quot;id&quot;: &quot;1&quot; ,
    &quot;date&quot;: &quot;2013-12-24T17:44:41.943Z&quot;,
    &quot;related-with&quot;: [ &quot;2&quot;,&quot;3&quot;,&quot;4&quot;],
    &quot;type&quot;: &quot;map&quot;,
    &quot;site&quot;: &quot;amazon&quot;,
    &quot;channel&quot;: &quot;de&quot;
}

{
    &quot;id&quot;: &quot;2&quot; ,
    &quot;date&quot;: &quot;2013-12-24T17:44:41.943Z&quot;,
    &quot;related-with&quot;: [ &quot;1&quot;,&quot;3&quot;,&quot;4&quot;],
    &quot;type&quot;: &quot;compass&quot;,
    &quot;site&quot;: &quot;amazon&quot;,
    &quot;channel&quot;: &quot;de&quot;
}

{
    &quot;id&quot;: &quot;3&quot; ,
    &quot;date&quot;: &quot;2013-12-24T17:44:41.943Z&quot;,
    &quot;related-with&quot;: [ &quot;1&quot;,&quot;2&quot;,&quot;4&quot;],
    &quot;type&quot;: &quot;torch&quot;,
    &quot;site&quot;: &quot;amazon&quot;,
    &quot;channel&quot;: &quot;de&quot;
}

{
    &quot;id&quot;: &quot;4&quot; ,
    &quot;date&quot;: &quot;2013-12-24T17:44:41.943Z&quot;,
    &quot;related-with&quot;: [ &quot;1&quot;,&quot;2&quot;,&quot;3&quot;],
    &quot;type&quot;: &quot;torch&quot;,
    &quot;site&quot;: &quot;amazon&quot;,
    &quot;channel&quot;: &quot;uk&quot;
}</code></pre>

<p>It is the json element “related-with”, that will be used during search, to provide faceting information. It is this faceting functionality provided by Elasticsearch that allows us to say:</p>

<ul>
<li>For this id, what are the 5 top most frequently <strong>related-with</strong> ids.</li>
</ul>

<!--       <article>

        <h3><a href="#">Blog Post Title</a></h3>
        <h6>Written by <a href="#">John Smith</a> on August 12, 2012.</h6>

        <div class="row">
          <div class="large-6 columns">
            <p>Bacon ipsum dolor sit amet nulla ham qui sint exercitation eiusmod commodo, chuck duis velit. Aute in reprehenderit, dolore aliqua non est magna in labore pig pork biltong. Eiusmod swine spare ribs reprehenderit culpa.</p>
            <p>Boudin aliqua adipisicing rump corned beef. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami.</p>
          </div>
          <div class="large-6 columns">
            <img src="http://placehold.it/400x240&text=[img]" />
          </div>
        </div>

        <p>Pork drumstick turkey fugiat. Tri-tip elit turducken pork chop in. Swine short ribs meatball irure bacon nulla pork belly cupidatat meatloaf cow. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami.</p>

        <p>Pork drumstick turkey fugiat. Tri-tip elit turducken pork chop in. Swine short ribs meatball irure bacon nulla pork belly cupidatat meatloaf cow. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami.</p>

      </article>

      <hr />

      <article>

        <h3><a href="#">Blog Post Title</a></h3>
        <h6>Written by <a href="#">John Smith</a> on August 12, 2012.</h6>

        <div class="row">
          <div class="large-6 columns">
            <p>Bacon ipsum dolor sit amet nulla ham qui sint exercitation eiusmod commodo, chuck duis velit. Aute in reprehenderit, dolore aliqua non est magna in labore pig pork biltong. Eiusmod swine spare ribs reprehenderit culpa.</p>
            <p>Boudin aliqua adipisicing rump corned beef. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami.</p>
          </div>
          <div class="large-6 columns">
            <img src="http://placehold.it/400x240&text=[img]" />
          </div>
        </div>

        <p>Pork drumstick turkey fugiat. Tri-tip elit turducken pork chop in. Swine short ribs meatball irure bacon nulla pork belly cupidatat meatloaf cow. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami.</p>

        <p>Pork drumstick turkey fugiat. Tri-tip elit turducken pork chop in. Swine short ribs meatball irure bacon nulla pork belly cupidatat meatloaf cow. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami.</p>

      </article> -->

    </div>

    <!-- End Main Content -->


    <!-- Sidebar -->

<!--     <aside class="large-3 columns">

      <h5>Categories</h5>
      <ul class="side-nav">
        <li><a href="#">News</a></li>
        <li><a href="#">Code</a></li>
        <li><a href="#">Design</a></li>
        <li><a href="#">Fun</a></li>
        <li><a href="#">Weasels</a></li>
      </ul>

      <div class="panel">
        <h5>Featured</h5>
        <p>Pork drumstick turkey fugiat. Tri-tip elit turducken pork chop in. Swine short ribs meatball irure bacon nulla pork belly cupidatat meatloaf cow.</p>
        <a href="#">Read More &rarr;</a>
      </div>

    </aside> -->

    <!-- End Sidebar -->
  </div>

  <!-- End Main Content and Sidebar -->

<div class="pagination-centered">
  <ul class="pagination">
  
  

   
  
    <li class="current"><a href="http://tootedom.github.io/related/indexing/indexing1">1</a></li>
  

   
  
    <li><a href="http://tootedom.github.io/related/indexing/indexing2">2</a></li>
  

   
  
    <li><a href="http://tootedom.github.io/related/indexing/indexing3">3</a></li>
  

   
  
    <li><a href="http://tootedom.github.io/related/indexing/indexing4">4</a></li>
  

  </ul>
</div>
  <!-- Footer -->
  <footer class="row">
    <div class="large-12 columns">
      <hr />
      <div class="row">
        <div class="large-6 columns">
          <p class="copyright">&copy; relate it maintained by <a href="https://github.com/tootedom">tootedom</a></p>
        </div>
        <div class="large-6 columns">
          <ul class="inline-list right">
            <li><a href="#">Link 1</a></li>
            <li><a href="#">Link 2</a></li>
            <li><a href="#">Link 3</a></li>
            <li><a href="#">Link 4</a></li>
          </ul>
        </div>
      </div>
    </div>
</footer>
<script src="http://tootedom.github.io/related/javascripts/vendor/jquery.js"></script>
<script src="http://tootedom.github.io/related/javascripts/foundation/foundation.js"></script>
<script src="http://tootedom.github.io/related/javascripts/foundation/foundation.dropdown.js"></script>
<script>
      $(document).foundation({
        // specify the class used for active dropdowns
        active_class: 'open'
      });

      var doc = document.documentElement;
      doc.setAttribute('data-useragent', navigator.userAgent);
</script>

  <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-47714522-1");
            pageTracker._trackPageview();
            } catch(err) {}
</script>
  </body>
</html>

